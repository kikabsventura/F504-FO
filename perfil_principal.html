<!DOCTYPE html>
<html lang="zxx" class="no-js">
<head>
		<!-- Mobile Specific Meta -->
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Favicon-->
		<link rel="shortcut icon" href="img/fav.png">
		<!-- Author Meta -->
		<meta name="author" content="codepixer">
		<!-- Meta Description -->
		<meta name="description" content="">
		<!-- Meta Keyword -->
		<meta name="keywords" content="">
		<!-- meta character set -->
		<meta charset="UTF-8">
		<!-- Site Title -->
		<title>Galeria Cores do Minho</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet"> 
        <!--
        CSS
        ============================================= -->
        <link rel="stylesheet" href="css/linearicons.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/magnific-popup.css">
        <link rel="stylesheet" href="css/nice-select.css">					
        <link rel="stylesheet" href="css/animate.min.css">
        <link rel="stylesheet" href="css/owl.carousel.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/forms-doacoes.css">
       
        <!-- CSS Paginas do Perfil (Banner Mais Pequeno)-->
        <link rel="stylesheet" href="css/perfil-utilizador.css">

    </head>
    <body id="page-top"~ onload="CarregarPerfil()">

      <!-- Section Nav e Banner Paginas de Perfil Utilizador-->
      <div class="banner-pequena">
        <img
          loading="lazy"
          src="img/header-bg.jpg"
          class="img-header-pequeno"
        />
        <div class="overlay-pequeno">
            <div class="barra-nav-pequena">
                <div class="logo-nome">
                <img
                    loading="lazy"
                    src="img/logo.png"
                    class="img-2"
                />
                <div class="nome">Galeria Cores do Minho</div>
                </div>
                <nav id="nav-menu-container">
                    <ul class="nav-menu">
                      <li class="menu-active"><a href="index.html">Home</a></li>
                      <li><a href="about.html">Sobre nós</a></li>
                      <li><a href="eventos.html">Eventos</a></li>
                      <li><a href="form-doacoes.html">Doações</a></li>
                      <li><a href="form-propostas.html">Propostas</a></li>
                      <li><a href="contactos.html">Contactos</a><li>
                      <li class="artistas"><a href="Artistas.html">Artistas</a>
                        <ul>
                            <li><a href="Maria Venceslau.html">Maria Venceslau</a></li>
                            <li><a href="laura.html">Laura Gonçalves</a></li>
                            <li><a href="Joana Duarte.html">Joana Duarte</a></li>
                            <li><a href="Zé Dias.html">Zé Dias</a></li>
                            <li><a href="Sara Perreira.html">Sara Pereira</a></li>
                            <li><a href="Concha Carvalho.html">Concha carvalho</a>
                            </li></li>
                          </ul>
                            <li><a 
                                
                            
                            <div class="navbar-user" id="navbar-user">
                                <a id="user-link" href="login.html">
                                    <img src="img/Simbolo.svg" alt="Usuário" />
                                </a>
                      </div>   
                    </ul>
                  </nav><!-- #nav-menu-container -->	
            </div>
        </div>
      </div> <!-- Final Section Nav e Banner -->
      <br>

    <!-- Start Page Content Area -->  

      <!-- Opcoes Mudanca de Paginas Dentro do Perfil -->
      <div class="container px-3 mt-3">
        <nav class="nav nav-borders">
          <a class="nav-link active ms-0" href="perfil_principal.html" target="__self" > <b>Perfil</b></a>
          <a class="nav-link" href="perfil_propostas.html" target="__self" > <b>Propostas</b></a>
          <a class="nav-link" href="perfil_doacoes.html" target="_self" > <b>Doações</b></a>
          <button id="google-logout" name="google-logout" 
                  style="background-color: #dc0303;color:#fff;border: #dc0303;margin-left: auto;font-size: 12px; height: 30px; width: 60px;">
                  Logout</button>
        </nav>

        <!--BOTAO LOGOUT-->
        <script type="module">
          // Importar as funções necessárias dos SDKs
          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.11.0/firebase-app.js";
          import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.11.0/firebase-auth.js";

          // Configuração do Firebase
          const firebaseConfig = {
              apiKey: "AIzaSyBi3eQl7z_RBDsI3s79BgaTs7Noo6efO4A",
              authDomain: "kika-login-teste.firebaseapp.com",
              projectId: "kika-login-teste",
              storageBucket: "kika-login-teste.appspot.com",
              messagingSenderId: "686876725608",
              appId: "1:686876725608:web:af0a867925ba20c48906dd",
              measurementId: "G-Q2ED6DE029"
          };

          // Inicializar o Firebase
          const app = initializeApp(firebaseConfig);
          const auth = getAuth();

          // Botão de logout
          const logoutButton = document.getElementById("google-logout");
          logoutButton.addEventListener("click", function() {
              signOut(auth).then(() => {
                  // Logout bem-sucedido
                  console.log("Logout bem-sucedido.");
                  // Limpar dados de autenticação do localStorage
                  localStorage.removeItem('nomeUtilizador');
                  localStorage.removeItem('fotoUtilizador');
                  localStorage.removeItem('emailUtilizador');
                  localStorage.removeItem('telefoneUtilizador');
                  localStorage.removeItem('localizacaoUtilizador');
                  // Remover o objeto 'user' do localStorage
                  localStorage.removeItem('user');
                  // Redirecionar para a página de login
                  window.location.href = "login.html";
              }).catch((error) => {
                  // Ocorreu um erro
                  console.error("Erro durante o logout:", error);
              });
          });
        </script>


      <!-- Foto do Perfil -->
      <hr class="mt-0 mb-4" />
      <div class="row">
        <div class="col-xl-4">
          <div class="card mb-4 mb-xl-0">
            <!-- Titulo -->
            <div class="card-header"> <b>Foto de perfil</b> </div>
            <!-- Conteudo -->
            <div class="card-body text-center" style="height:380px">
              <!-- Foto User -->
              <div style="max-width: 400px; max-height: 280px; overflow: hidden; margin: 0 auto; display: flex; justify-content: center; align-items: center; margin-bottom: 20px;">
                  <img id="foto-user" class="img-fluid" src="img/symbole-masculin-icone-l-utilisateur-noir.png" alt=""/>
              </div>
          
              <!-- Botão -->
              <!-- Botão estilizado -->
              <label for="perfil-upload" class="primary-btn" onclick="cliqueBotao(event)">Upload Foto</label>
          
              <!-- Botão de entrada de arquivo oculto -->
              <input id="perfil-upload" type="file" accept="image/*" style="display: none;" onchange="mostrarFoto(this)" />
          
              <script>
                  // Função para tratar o clique no botão estilizado
                  function cliqueBotao(event) {
                      // Impede o comportamento padrão do navegador (abrir o seletor de arquivo)
                      event.preventDefault();
                      // Aciona o clique no input de arquivo
                      document.getElementById('perfil-upload').click();
                  }
          
                  // Função para mostrar a foto selecionada
                  function mostrarFoto(input) {
                      if (input.files && input.files[0]) {
                          var reader = new FileReader();
                          reader.onload = function (e) {
                              document.getElementById('foto-user').src = e.target.result;
                          };
                          reader.readAsDataURL(input.files[0]);
                      }
                  }
              </script>
            </div>
          </div>
        </div>

      <!-- Formulario Informacoes da Conta -->

        <div class="col-xl-8">
          <div class="card mb-4 mb-0">
            <!-- Titulo -->
            <div class="card-header"> <b>Detalhes da Conta</b></div>
            <!-- Conteudo -->
            <div class="card-body" style="height:380px">
              <form id="formPerfil" action="" onsubmit="submitForm(); return false;">
                <!-- Linha 1 -->
                <div class="row gx-3 mb-3">

                  <!-- Primeiro Nome -->
                  <div class="col-md-6">
                    <label class="small mb-1" for="inputFirstName">Primeiro Nome</label>
                    <input
                      class="form-control"
                      id="inputFirstName"
                      type="text"
                      value=""
                      readonly
                    />
                  </div>

                  <!-- Ultimo Nome -->
                  <div class="col-md-6">
                    <label class="small mb-1" for="inputLastName">Último Nome</label>
                    <input
                      class="form-control"
                      id="inputLastName"
                      type="text"
                      value=""
                      readonly
                    />
                  </div>
                </div> <!-- Final Linha 1 -->

                <!-- Linha 2-->
                <div class="row gx-3 mb-3">

                  <!-- Email-->
                  <div class="col-md-6">
                    <label class="small mb-1" for="inputEmailAddress">Email</label>
                    <input
                      class="form-control"
                      id="inputEmailAddress"
                      type="email"
                      value=""
                      readonly
                    />
                  </div>

                  <!-- Telemovel-->
                  <div class="col-md-6">
                    <label class="small mb-1" for="inputPhone">Contacto telefónico</label>
                     <input
                      class="form-control"
                      id="inputPhone"
                      type="tel"
                      placeholder="Insira o seu número de telefone"
                      pattern="[0-9]{3}\s?[0-9]{3}\s?[0-9]{3}"
                      onfocus="this.placeholder = ''"
                      onblur="this.placeholder = 'Insira o seu número de telefone'"
                      value=""
                      required
                    />
                    </div>
                  </div> <!-- Final Linha 2-->

                <!-- Linha 3-->
                <div class="row gx-3 mb-3">
                
                  <!-- Localizacao-->
                  <div class="col-md-6">
                    <label class="small mb-1" for="inputLocation">Localização</label>
                    <input
                      class="form-control"
                      id="inputLocation"
                      type="text"
                      placeholder="Insira a sua zona de residência"
                      pattern="^[A-Z][a-z\s]*( [A-Z][a-z\s]*)*$"
                      onfocus="this.placeholder = ''"
                      onblur="this.placeholder = 'Insira a sua zona de residência'"
                      value=""
                      required
                    />
                  </div>

                </div><!-- Final Linha 3-->
                
                <!-- Linha 4-->
                <div class="row gx-3 mb-3" style="border-spacing: 0 50px;">

                  <!-- Botão -->
                  <div class="col-md-6" style='text-align:center'>
                  <a onclick="EditarPerfil()" class="primary-btn" id="UpdatePerfil" value="Guardar Alterações" style="color:#fff"> Guardar Alterações</a>
                  </div>

                  <!-- Apagar Conta-->
                  <div class="col-md-6">
                    <p class= "text-right" style="margin-bottom:0; color:#6C757D"> Atenção! Eliminar a sua conta é &emsp; &ensp;</p>
                    <p class= "text-right" style="color:#6C757D"> uma decisão permanente e irreversível</p>
                    <p style="text-align:center">
                      &emsp; &emsp; &emsp;
                      <a href="apagar-conta" class="primary-btn" onclick="confirmarExclusao()">Apagar Conta</a>
                    </p>
                    </div>
                  </div>

                </div>
                
                <script>
                  function submitForm() {
                    // Submit the form
                    document.getElementById('form').submit();
                  }
                </script>


                <!-- Aviso Alterações Guardadas (preciso de meter no botão onclick mas tira os requisitos do resto do forms) -->
                <script>
                  function mostrarAviso() {
                    alert("As suas alterações foram guardadas");
                  }
                </script>

                <!-- Aviso Apagar Conta -->
                <script>
                  function confirmarExclusao() {
                    if (confirm("Tem a certeza que deseja apagar a sua conta? Esta ação é permanente e irreversível.")) {
                      alert("A sua conta foi apagada com sucesso!");
                    } else {
                      alert("A exclusão da conta foi cancelada.");
                    }
                  }
                  </script>

              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

 <!-- start footer Area -->        
 <footer class="footer-area section-gap">
  <div class="container">
      <div class="row">
          <div class="col-lg-4 col-md-6 col-sm-6">
              <div class="single-footer-widget">
                  <h6>Cores do Minho</h6>
                  <p>
                      Cores do Minho é uma galeria sem fim lucrativos, que tem como objetivo promover a cultura e as artes na comunidade através de eventos culturais e apoio a artistas locais.
                  </p>
                  <br> </br>
                  <p> © 2024 All Rights Reserved.</p>
              </div>
          </div>
          <div class="col-lg-4 col-md-6 col-sm-6">
              <div class="informacoes-uteis">
                  <h6>Informações Úteis</h6>
                  <p><i class="fa fa-home" style="color:#dc0303"></i> Rua das Flores 152, 4810-225 Guimarães</p>
                  <p><i class="fa fa-phone" style="color:#dc0303"></i> +351 252 123 456</p>
                  <p><i class="fa fa-envelope" style="color:#dc0303"></i> contacto@galeriacoresdominho.pt</p>
              </div>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6">
              <h6>Links Úteis</h6>
              <ul class="footer-links">
                  <li><a href="index.html">Home</a></li>
                  <li><a href="about.html">Sobre Nós</a></li>
                  <li><a href="eventos.html">Eventos</a></li>
                  <li><a href="Artistas.html">Artistas</a></li> 
                  <li><a href="form-doacoes.html">Doações</a></li> 
              </ul>
          </div>
  
          <div class="col-lg-1 col-md-6 col-sm-6">
              <div class="single-footer-widget">
                  <img src="img/logo.png" alt="Logo" /> 
              <a style="width:200px" href="contactos.html" class="primary-btn"> Contacte-nos</a>
              </div>
  
          </div>
          
      </div>
  </div>
  </footer> 
  <!-- End footer Area -->

  <!-- local and session storage arquivo json-->
  <script src="js/login_perfil.js" defer></script>


  <script src="js/vendor/jquery-2.2.4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="js/vendor/bootstrap.min.js"></script>			
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhOdIF3Y9382fqJYt5I_sswSrEw5eihAA"></script>
   <script src="js/easing.min.js"></script>			
  <script src="js/hoverIntent.js"></script>
  <script src="js/superfish.min.js"></script>	
  <script src="js/jquery.ajaxchimp.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>	
  <script src="js/owl.carousel.min.js"></script>	
  <script src="js/imagesloaded.pkgd.min.js"></script>
  <script src="js/justified.min.js"></script>					
  <script src="js/jquery.sticky.js"></script>
  <script src="js/jquery.nice-select.min.js"></script>			
  <script src="js/parallax.min.js"></script>		
  <script src="js/mail-script.js"></script>	
  <script src="js/main.js"></script>	

  <script>
		// Verificar se há um usuário armazenado no localStorage
		const user = localStorage.getItem('user');
		if (user) {
			// Se existir um usuário, redirecione para o perfil_principal.html
			document.getElementById("user-link").setAttribute("href", "perfil_principal.html");
		} else {
			// Se não existir um usuário, redirecione para a página de login
			document.getElementById("user-link").setAttribute("href", "login.html");
		}
	</script>
  </body>
</html>